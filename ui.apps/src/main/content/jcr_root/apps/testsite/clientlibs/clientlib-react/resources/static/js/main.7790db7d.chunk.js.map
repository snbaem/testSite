{"version":3,"sources":["App.js","components/Page/Page.js","components/RouteHelper/RouteHelper.js","components/Text/Text.js","utils/extract-model-id.js","index.js"],"names":["App","this","childComponents","childPages","Page","withModel","require","WrappedComponent","extension","AppPage","attrs","className","props","cssClassNames","MapTo","withComponentMappingContext","routePath","cqPath","key","exact","path","render","routeProps","Component","Text","id","replace","data-rte-editelement","dangerouslySetInnerHTML","__html","DOMPurify","sanitize","text","richText","richTextContent","textContent","emptyLabel","isEmpty","trim","length","document","addEventListener","ModelManager","initialize","then","pageModel","history","createBrowserHistory","cqChildren","Constants","CHILDREN_PROP","cqItems","ITEMS_PROP","cqItemsOrder","ITEMS_ORDER_PROP","PATH_PROP","locationPathname","window","location","pathname","getElementById"],"mappings":"wUAIMA,E,4JACJ,WACE,OACE,6BACGC,KAAKC,gBACLD,KAAKE,gB,GALIC,QAWHC,sBAAUL,G,iBCQzBM,EAAQ,K,ICOkBC,EAAkBC,EDFtCC,E,kKACJ,WACE,IAAIC,EAAK,4DAGT,OAFAA,EAAMC,WACHD,EAAMC,WAAa,IAAM,UAAYV,KAAKW,MAAMC,eAAiB,IAC7DH,M,GALWN,Q,GASPU,gBAAM,2BAANA,CACbC,uCCRwBR,EDQcE,ECPtC,4JACE,WAAU,IAAD,OACHO,EAAYf,KAAKW,MAAMK,OAC3B,OAAKD,GAILR,EAAYA,GAAa,OAIvB,kBAAC,IAAD,CACEU,IAAKF,EACLG,OAAK,EACLC,KAAM,OAASJ,EAAY,KAAOR,EAAY,KAC9Ca,OAAQ,SAAAC,GACN,OAAO,kBAACf,EAAD,iBAAsB,EAAKK,MAAWU,QAZ1C,kBAACf,EAAqBN,KAAKW,WAJxC,GAAoCW,gB,iBCVtCjB,EAAQ,KAOR,IAWMkB,E,mKACJ,WACE,OACE,yBACEC,ICrB+BL,EDqBZnB,KAAKW,MAAMK,OCpB7BG,GAAQA,EAAKM,QAAQ,QAAS,MDqB/BC,wBAAA,EACAC,wBAAyB,CACvBC,OAAQC,IAAUC,SAAS9B,KAAKW,MAAMoB,SCxBjC,IAAwBZ,I,uBD8BrC,WACE,OAAO,6BAAMnB,KAAKW,MAAMoB,Q,oBAG1B,WACE,OAAO/B,KAAKW,MAAMqB,SAAWhC,KAAKiC,gBAAkBjC,KAAKkC,gB,GAlB1CZ,aAsBJT,gBAAM,2BAANA,CACbU,EAlCqB,CACrBY,WAAY,OAEZC,QAAS,SAASzB,GAChB,OAAQA,IAAUA,EAAMoB,MAAQpB,EAAMoB,KAAKM,OAAOC,OAAS,K,OEA/DC,SAASC,iBAAiB,oBAAoB,WAC5CC,eAAaC,aAAaC,MAAK,SAAAC,GAC7B,IAAMC,EAAUC,cAChB1B,iBACE,kBAAC,IAAD,CAAQyB,QAASA,GACf,kBAAC,EAAD,CACEA,QAASA,EACTE,WAAYH,EAAUI,YAAUC,eAChCC,QAASN,EAAUI,YAAUG,YAC7BC,aAAcR,EAAUI,YAAUK,kBAClCrC,OAAQ4B,EAAUI,YAAUM,WAC5BC,iBAAkBC,OAAOC,SAASC,YAGtCnB,SAASoB,eAAe,qB","file":"static/js/main.7790db7d.chunk.js","sourcesContent":["import { Page, withModel } from '@adobe/cq-react-editable-components';\r\nimport React from 'react';\r\n\r\n// This component is the application entry point\r\nclass App extends Page {\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.childComponents}\r\n        {this.childPages}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withModel(App);\r\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n ~ Copyright 2020 Adobe Systems Incorporated\r\n ~\r\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\r\n ~ you may not use this file except in compliance with the License.\r\n ~ You may obtain a copy of the License at\r\n ~\r\n ~     http://www.apache.org/licenses/LICENSE-2.0\r\n ~\r\n ~ Unless required by applicable law or agreed to in writing, software\r\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\r\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n ~ See the License for the specific language governing permissions and\r\n ~ limitations under the License.\r\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\r\n\r\nimport {\r\n  MapTo,\r\n  Page,\r\n  withComponentMappingContext\r\n} from '@adobe/cq-react-editable-components';\r\nimport { withRoute } from '../RouteHelper/RouteHelper';\r\n\r\nrequire('./Page.css');\r\n\r\n// This component is a variant of a Page component mapped to the\r\n// \"testsite/components/page\" resource type. For now, the rendering is\r\n// the same as the RootPage; this is more for illustration purposes\r\nclass AppPage extends Page {\r\n  get containerProps() {\r\n    let attrs = super.containerProps;\r\n    attrs.className =\r\n      (attrs.className || '') + ' page ' + (this.props.cssClassNames || '');\r\n    return attrs;\r\n  }\r\n}\r\n\r\nexport default MapTo('testsite/components/page')(\r\n  withComponentMappingContext(withRoute(AppPage))\r\n);\r\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n ~ Copyright 2020 Adobe Systems Incorporated\r\n ~\r\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\r\n ~ you may not use this file except in compliance with the License.\r\n ~ You may obtain a copy of the License at\r\n ~\r\n ~     http://www.apache.org/licenses/LICENSE-2.0\r\n ~\r\n ~ Unless required by applicable law or agreed to in writing, software\r\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\r\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n ~ See the License for the specific language governing permissions and\r\n ~ limitations under the License.\r\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\r\n\r\nimport React, { Component } from 'react';\r\nimport { Route } from 'react-router-dom';\r\n\r\n/**\r\n * Helper that facilitate the use of the {@link Route} component\r\n */\r\n\r\n/**\r\n * Returns a composite component where a {@link Route} component wraps the provided component\r\n *\r\n * @param {React.Component} WrappedComponent    - React component to be wrapped\r\n * @param {string} [extension=html]             - extension used to identify a route amongst the tree of resource URLs\r\n * @returns {CompositeRoute}\r\n */\r\nexport const withRoute = (WrappedComponent, extension) => {\r\n  return class CompositeRoute extends Component {\r\n    render() {\r\n      let routePath = this.props.cqPath;\r\n      if (!routePath) {\r\n        return <WrappedComponent {...this.props} />;\r\n      }\r\n\r\n      extension = extension || 'html';\r\n\r\n      // Context path + route path + extension\r\n      return (\r\n        <Route\r\n          key={routePath}\r\n          exact\r\n          path={'(.*)' + routePath + '(.' + extension + ')?'}\r\n          render={routeProps => {\r\n            return <WrappedComponent {...this.props} {...routeProps} />;\r\n          }}\r\n        />\r\n      );\r\n    }\r\n  };\r\n};\r\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n ~ Copyright 2020 Adobe Systems Incorporated\r\n ~\r\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\r\n ~ you may not use this file except in compliance with the License.\r\n ~ You may obtain a copy of the License at\r\n ~\r\n ~     http://www.apache.org/licenses/LICENSE-2.0\r\n ~\r\n ~ Unless required by applicable law or agreed to in writing, software\r\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\r\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n ~ See the License for the specific language governing permissions and\r\n ~ limitations under the License.\r\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\r\n\r\nimport { MapTo } from '@adobe/cq-react-editable-components';\r\nimport DOMPurify from 'dompurify';\r\nimport React, { Component } from 'react';\r\nimport extractModelId from '../../utils/extract-model-id';\r\n\r\nrequire('./Text.css');\r\n\r\n/**\r\n * Default Edit configuration for the Text component that interact with the Core Text component and sub-types\r\n *\r\n * @type EditConfig\r\n */\r\nconst TextEditConfig = {\r\n  emptyLabel: 'Text',\r\n\r\n  isEmpty: function(props) {\r\n    return !props || !props.text || props.text.trim().length < 1;\r\n  }\r\n};\r\n\r\n/**\r\n * Text React component\r\n */\r\nclass Text extends Component {\r\n  get richTextContent() {\r\n    return (\r\n      <div\r\n        id={extractModelId(this.props.cqPath)}\r\n        data-rte-editelement\r\n        dangerouslySetInnerHTML={{\r\n          __html: DOMPurify.sanitize(this.props.text)\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  get textContent() {\r\n    return <div>{this.props.text}</div>;\r\n  }\r\n\r\n  render() {\r\n    return this.props.richText ? this.richTextContent : this.textContent;\r\n  }\r\n}\r\n\r\nexport default MapTo('testsite/components/text')(\r\n  Text,\r\n  TextEditConfig\r\n);\r\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n ~ Copyright 2020 Adobe Systems Incorporated\r\n ~\r\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\r\n ~ you may not use this file except in compliance with the License.\r\n ~ You may obtain a copy of the License at\r\n ~\r\n ~     http://www.apache.org/licenses/LICENSE-2.0\r\n ~\r\n ~ Unless required by applicable law or agreed to in writing, software\r\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\r\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n ~ See the License for the specific language governing permissions and\r\n ~ limitations under the License.\r\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\r\n\r\n/**\r\n * Extract an id from the cqModel field of given properties\r\n *\r\n * @param path - Path to be converted into an id\r\n * @returns {string|undefined}\r\n */\r\nexport default function extractModelId(path) {\r\n  return path && path.replace(/\\/|:/g, '_');\r\n}\r\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n ~ Copyright 2020 Adobe Systems Incorporated\r\n ~\r\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\r\n ~ you may not use this file except in compliance with the License.\r\n ~ You may obtain a copy of the License at\r\n ~\r\n ~     http://www.apache.org/licenses/LICENSE-2.0\r\n ~\r\n ~ Unless required by applicable law or agreed to in writing, software\r\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\r\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n ~ See the License for the specific language governing permissions and\r\n ~ limitations under the License.\r\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\r\n\r\n// Use polyfills for modern language features\r\n// The imports and dependencies can be removed if only modern browsers should be\r\n// supported\r\nimport 'react-app-polyfill/stable';\r\nimport 'react-app-polyfill/ie9';\r\nimport 'custom-event-polyfill';\r\n\r\nimport { Constants, ModelManager } from '@adobe/cq-spa-page-model-manager';\r\nimport { createBrowserHistory } from 'history';\r\nimport React from 'react';\r\nimport { render } from 'react-dom';\r\nimport { Router } from 'react-router-dom';\r\nimport App from './App';\r\nimport './components/import-components';\r\nimport './index.css';\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  ModelManager.initialize().then(pageModel => {\r\n    const history = createBrowserHistory();\r\n    render(\r\n      <Router history={history}>\r\n        <App\r\n          history={history}\r\n          cqChildren={pageModel[Constants.CHILDREN_PROP]}\r\n          cqItems={pageModel[Constants.ITEMS_PROP]}\r\n          cqItemsOrder={pageModel[Constants.ITEMS_ORDER_PROP]}\r\n          cqPath={pageModel[Constants.PATH_PROP]}\r\n          locationPathname={window.location.pathname}\r\n        />\r\n      </Router>,\r\n      document.getElementById('spa-root')\r\n    );\r\n  });\r\n});\r\n"],"sourceRoot":""}